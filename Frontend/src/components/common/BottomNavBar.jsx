import '../CSS/BottomNavBar.css';
import { Link, useNavigate } from "react-router-dom";
import { useMutation, useQuery, useQueryClient } from "@tanstack/react-query";
import toast from "react-hot-toast";

function BottomNavBar() {
    const navigate = useNavigate();
    const queryClient = useQueryClient();
    const { mutate: logout } = useMutation({
        mutationFn: async () => {
            try {
                const res = await fetch("/api/auth/logout", {
                    method: "POST",
                });
                const data = await res.json();

                if (!res.ok) {
                    throw new Error(data.error || "Something went wrong");
                }
            } catch (error) {
                throw new Error(error);
            }
        },
        onSuccess: () => {
            queryClient.invalidateQueries({ queryKey: ["authUser"] });
        },
        onError: () => {
            toast.error("Logout failed");
        },
    });
    const { data: authUser } = useQuery({ queryKey: ["authUser"] });
    return (
        <>
            <div className="BottomNavbar">
                <svg xmlns="http://www.w3.org/2000/svg" width="3em" height="3em" viewBox="0 0 48 48"><path fill="none" stroke="currentColor" strokeLinecap="round" strokeLinejoin="round" d="M11.295 22.46c3.59-1.486 7.34-1.981 9.638 2.951c.208.438.12 1.02-.65 1.217c-4.029.132-7.65-.937-8.988-4.169m25.413 0c-3.59-1.485-7.34-1.98-9.637 2.956c-.208.438-.121 1.02.65 1.213c4.029.132 7.65-.937 8.987-4.169M19.38 14.35a6.53 6.53 0 0 0-4.233-.416L4.5 16.299c.09 4.819-.095 9.77 2.974 13.893c3.194 4.294 9.252 4.887 12.684 3.137s2.729-2.385 3.844-2.566c1.115.181.412.816 3.84 2.566c3.431 1.75 9.49 1.157 12.687-3.137c3.07-4.12 2.884-9.07 2.97-13.893l-10.646-2.37a6.53 6.53 0 0 0-4.229.416c-1.285.586-1.98 1.183-4.622 1.183c-2.646 0-3.337-.597-4.626-1.183z"></path></svg>
                <svg xmlns="http://www.w3.org/2000/svg" width="2.5em" height="2.5em" viewBox="0 0 2048 2048"><path fill="currentColor" d="M0 256h128v128H0zm0 256h128v128H0zm0 256h128v128H0zm0 256h128v128H0zm0 512h128v128H0zM256 256h128v128H256zm0 1280h128v128H256zm1664 0h128v128h-128zM0 1280h128v128H0zm1920 0h128v128h-128zm0-256h128v128h-128zm0-256h128v128h-128zm0-256h128v128h-128zm128-256v128h-128V256zm-384 1280h128v128h-128zm0-1280h128v128h-128zm-1152 0h1024v1408H512zm128 1280h768V384H640z"></path></svg>
                <svg xmlns="http://www.w3.org/2000/svg" width="3em" height="3em" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" strokeLinecap="round" strokeLinejoin="round" strokeWidth={1} d="M21 19.5a1.5 1.5 0 1 0-3 0a1.5 1.5 0 0 0 3 0m-7.5 0a1.5 1.5 0 1 0-3 0a1.5 1.5 0 0 0 3 0m-7.5 0a1.5 1.5 0 1 0-3 0a1.5 1.5 0 0 0 3 0M21 12a1.5 1.5 0 1 0-3 0a1.5 1.5 0 0 0 3 0m0-7.5a1.5 1.5 0 1 0-3 0a1.5 1.5 0 0 0 3 0M13.5 12a1.5 1.5 0 1 0-3 0a1.5 1.5 0 0 0 3 0m0-7.5a1.5 1.5 0 1 0-3 0a1.5 1.5 0 0 0 3 0M6 12a1.5 1.5 0 1 0-3 0a1.5 1.5 0 0 0 3 0m0-7.5a1.5 1.5 0 1 0-3 0a1.5 1.5 0 0 0 3 0" color="currentColor"></path></svg>
                <svg xmlns="http://www.w3.org/2000/svg" width="2.5em" height="2.5em" viewBox="0 0 32 32"><path fill="currentColor" d="M29.93 16.29c.02-.03.05-.07.06-.11v-.01c.01-.02.01-.04.02-.06c0-.02.01-.04.01-.07v-.08c0-.02-.01-.04-.01-.06v-.01c0-.02-.01-.04-.02-.05v-.01l-.03-.06c-.01-.02-.02-.03-.03-.05l-.01-.01c-.01-.02-.03-.03-.04-.05a.2.2 0 0 0-.05-.04l-.01-.01a.2.2 0 0 1-.06-.04c-2.58-1.39-4-3.3-4.2-5.67c-.16-1.81.46-3.23.46-3.24v-.01c.01-.02.02-.04.02-.06v-.01c.01-.02.01-.04.01-.06v-.16a.3.3 0 0 0-.03-.11s0-.01-.01-.01a.2.2 0 0 0-.03-.05c-.01-.02-.03-.04-.04-.05v-.01l-.01-.01l-.02-.02l-.02-.02l-.01-.01c-.02-.01-.03-.03-.05-.04c0 0-.01 0-.01-.01c-.01 0-.03-.01-.04-.02c0 0-.01 0-.01-.01c-.02-.01-.04-.02-.06-.02h-.01c-.02-.01-.04-.01-.06-.01h-.17c-.02 0-.04.01-.06.01c-2.81.84-5.16.5-6.98-1.04c-1.38-1.16-1.95-2.6-1.95-2.61l-.03-.06c-.01-.02-.02-.03-.03-.05l-.01-.01c-.01-.02-.03-.03-.04-.05l-.04-.04l-.01-.01c-.03-.02-.07-.05-.11-.06h-.01c-.02-.01-.04-.01-.06-.02c-.04-.01-.06-.02-.08-.02h-.09c-.02 0-.04.01-.06.01h-.01c-.02 0-.03.01-.05.02c0 0-.01 0-.01.01l-.06.03h-.01c-.02.01-.03.02-.05.03l-.01.01c-.02.01-.03.03-.05.04l-.04.04l-.01.01c-.01.02-.02.04-.03.05c-1.39 2.58-3.3 4-5.67 4.2C8.11 6.63 6.69 6 6.68 6h-.01l-.06-.03H6.6c-.02 0-.04-.01-.05-.01h-.16c-.04.01-.08.02-.12.04c0 0-.01 0-.01.01c-.02 0-.04.01-.05.02c-.03.02-.04.03-.06.04h-.01l-.01.01c0 .01 0 .02-.01.02c-.01.01-.01.02-.02.02l-.01.01c-.01.02-.03.04-.04.06c0 0 0 .01-.01.01c0 .01-.01.03-.02.04c0 0 0 .01-.01.01c0 .02-.01.04-.02.07c0 .02-.01.04-.01.06v.15c0 .02.01.04.01.06c.84 2.81.5 5.16-1.04 6.98c-1.16 1.38-2.59 1.94-2.62 1.95l-.06.03h-.01c-.02.01-.03.02-.05.03l-.01.01c-.02.01-.03.03-.05.04l-.01.01c-.01.01-.02.03-.04.04l-.01.01c-.02.03-.04.07-.06.11v.01c-.01.02-.01.04-.02.06c0 .02-.01.04-.01.06v.08c0 .02.01.04.01.06v.01c0 .02.01.04.02.05v.01l.03.06c.01.02.02.03.03.05l.01.01c.01.02.03.03.04.05c.01.01.03.03.05.04l.01.01c.02.01.04.02.06.04c2.58 1.39 4 3.3 4.2 5.67c.18 1.84-.44 3.26-.44 3.27v.01c-.01.02-.02.04-.02.06v.01c-.01.02-.01.04-.01.06v.16c.01.04.02.08.04.12c0 0 0 .01.01.01c.01.02.02.04.03.05c.01.02.03.04.04.05v.01l.01.01l.02.02l.02.02l.01.01c.02.01.03.03.05.04c0 0 .01 0 .01.01c.02.01.03.02.05.03c0 0 .01 0 .01.01c.02.01.04.02.06.02h.01c.02.01.04.01.06.01h.15c.02 0 .04-.01.06-.01c2.81-.85 5.16-.5 6.98 1.04c1.38 1.16 1.95 2.6 1.95 2.61l.03.06c.01.02.02.03.03.05l.01.01c.01.02.03.03.04.05l.04.04l.01.01c.03.02.07.05.11.06h.01c.02.01.04.01.06.02c.02 0 .04.01.06.01h.12c.02 0 .03-.01.05-.01h.01a.4.4 0 0 0 .11-.05l.01-.01c.01-.01.03-.02.04-.03l.01-.01c.02-.01.03-.03.04-.04l.01-.01c.01-.01.02-.02.03-.04l.01-.01c.01-.02.02-.03.03-.05c1.39-2.58 3.3-4 5.67-4.2c1.8-.16 3.22.46 3.23.47c.02.01.04.02.06.02h.01c.02.01.04.01.06.01h.17c.04-.01.08-.02.12-.04c0 0 .01 0 .01-.01c.02-.01.04-.02.05-.03c.02-.01.04-.03.05-.04h.01l.01-.01l.02-.02l.02-.02l.01-.01c.01-.02.03-.03.04-.05c0 0 0-.01.01-.01c.01-.02.02-.03.03-.05c0 0 0-.01.01-.01c.01-.02.02-.04.02-.06c.01-.02.01-.04.01-.06v-.15c0-.02-.01-.04-.01-.06c-.84-2.81-.5-5.16 1.04-6.98c1.16-1.38 2.6-1.95 2.61-1.95l.06-.03h.01c.02-.01.03-.02.05-.03l.01-.01c.02-.01.03-.03.05-.04l.04-.04c.01-.04.01-.04.02-.05m-2.13-.79h-4.15c-2.84-1.6-2.08-4.05-1.9-4.52l2.86-2.86c-.08.53-.11 1.15-.06 1.81c.21 2.61 1.68 4.39 3.25 5.57m-16.3 3.86c-.07-.82-.39-1.9-1.41-2.86h4.73l-3.3 3.3c0-.14-.01-.29-.02-.44m5.02-9.23c.1.1.21.2.32.3c.6.51 1.53 1.02 2.85 1.02h.17l-3.34 3.34zm-1 4.66l-3.3-3.3c.14 0 .29 0 .44-.01c.82-.07 1.9-.39 2.86-1.41zm-.71.71h-4.66c.1-.1.2-.21.3-.32c.53-.63 1.07-1.61 1.02-3.02zm.71 1.71v4.67c-.1-.1-.21-.2-.32-.3c-.6-.51-1.53-1.02-2.85-1.02h-.17zm1 0l3.3 3.3c-.14 0-.29 0-.44.01c-.82.07-1.9.39-2.86 1.41zm.71-.71h4.67c-.1.1-.2.21-.3.32c-.53.63-1.07 1.61-1.02 3.02zm0-1l3.3-3.3c0 .14 0 .29.01.44c.07.82.39 1.9 1.41 2.86zm.53-9.83c1.99 1.7 4.29 1.92 6.24 1.64l-2.94 2.94c-3.14.88-4.33-1.39-4.54-1.85V4.35c.32.43.73.89 1.24 1.32m-7.81 1.8c2.61-.21 4.39-1.68 5.57-3.25v4.15c-1.6 2.84-4.05 2.08-4.52 1.9L8.14 7.41c.53.07 1.14.11 1.81.06m-4.26 6.79c1.7-1.99 1.92-4.29 1.64-6.24l2.94 2.94c.88 3.13-1.39 4.33-1.85 4.54H4.37c.43-.32.89-.73 1.32-1.24M4.24 16.5h4.15c2.84 1.6 2.08 4.05 1.9 4.52l-2.86 2.86c.08-.53.11-1.15.06-1.81c-.21-2.61-1.68-4.39-3.25-5.57m10.04 9.83c-1.54-1.31-3.27-1.74-4.87-1.74c-.47 0-.93.04-1.37.1l2.94-2.94c3.14-.88 4.33 1.39 4.54 1.85v4.05c-.32-.43-.73-.89-1.24-1.32m7.81-1.8c-2.61.21-4.39 1.68-5.57 3.25v-4.15c1.6-2.84 4.05-2.08 4.52-1.9l2.86 2.86c-.53-.07-1.14-.11-1.81-.06m4.26-6.79c-1.7 1.99-1.92 4.29-1.64 6.24l-2.94-2.94c-.88-3.14 1.39-4.33 1.85-4.54h4.05c-.43.32-.89.73-1.32 1.24"></path></svg>
                <li className='flex justify-center md:justify-start'>
                    <Link
                        to={`/profile/${authUser?.username}`}
                        className='flex gap-3 items-center hover:bg-stone-800 transition-all rounded-full duration-300 py-2 pl-2 pr-2 max-w-fit cursor-pointer'
                    >

                        <svg xmlns="http://www.w3.org/2000/svg" width="2.5em" height="2.5em" viewBox="0 0 32 32"><path fill="currentColor" d="M16 2a7 7 0 1 0 0 14a7 7 0 0 0 0-14m-6 7a6 6 0 1 1 12 0a6 6 0 0 1-12 0m-2.5 9A3.5 3.5 0 0 0 4 21.5v.667C4 24.317 6.766 30 16 30s12-5.684 12-7.833V21.5a3.5 3.5 0 0 0-3.5-3.5zM5 21.5A2.5 2.5 0 0 1 7.5 19h17a2.5 2.5 0 0 1 2.5 2.5v.667C27 23.684 24.765 29 16 29S5 23.684 5 22.167z"></path></svg>
                        {/* <span className='text-lg hidden md:block'>Profile</span> */}
                    </Link>
                </li> </div>
        </>
    );
}


export default BottomNavBar;